<!-- Auto-generated by Glass Compiler — do not edit directly -->


# Verification: compiler.annotations

**Status:** PROVEN

**Assertions:** 17/17 passed

## INSTRUMENTED

- [+] annotationsDir is a valid directory path
  - Precondition will be checked at runtime
- [+] unitId is a non-empty string
  - Precondition will be checked at runtime
- [+] target follows valid format: line:<n> or dotted path (intent.*, contract.*, implementation.*)
  - Precondition will be checked at runtime
- [+] addAnnotation persists annotation to .annotations/<unitId>.annotations.json
  - Success guarantee will be checked at runtime
- [+] Each annotation has a unique generated ID
  - Success guarantee will be checked at runtime
- [+] resolveAnnotation sets resolved: true and persists
  - Success guarantee will be checked at runtime
- [+] deleteAnnotation removes the annotation from storage
  - Success guarantee will be checked at runtime
- [+] loadAnnotations returns all annotations for a unit
  - Success guarantee will be checked at runtime
- [+] getUnresolvedAnnotations returns only annotations where resolved is false
  - Success guarantee will be checked at runtime
- [+] Returns AnnotationError with reason and message
  - Failure guarantee will be checked at runtime
- [+] Annotation files are scoped per unit (one JSON file per unitId)
  - Invariant will be checked at runtime
- [+] Annotation IDs are unique across the project
  - Invariant will be checked at runtime
- [+] Empty annotation files are deleted (not left as empty arrays)
  - Invariant will be checked at runtime
- [+] Failure mode handled: UnitNotFound
  - Error type 'UnitNotFound' is referenced but handler completeness deferred to runtime
- [+] Failure mode handled: AnnotationNotFound
  - Error type 'AnnotationNotFound' is referenced but handler completeness deferred to runtime
- [+] Failure mode handled: InvalidTarget
  - Error type 'InvalidTarget' is referenced but handler completeness deferred to runtime

## PROVEN

- [+] Failure mode handled: WriteError
  - Error type 'WriteError' is caught and handled with appropriate response

## Advisories

- Runtime check needed: annotationsDir is a valid directory path — Precondition will be checked at runtime
- Runtime check needed: unitId is a non-empty string — Precondition will be checked at runtime
- Runtime check needed: target follows valid format: line:<n> or dotted path (intent.*, contract.*, implementation.*) — Precondition will be checked at runtime
- Runtime check needed: addAnnotation persists annotation to .annotations/<unitId>.annotations.json — Success guarantee will be checked at runtime
- Runtime check needed: Each annotation has a unique generated ID — Success guarantee will be checked at runtime
- Runtime check needed: resolveAnnotation sets resolved: true and persists — Success guarantee will be checked at runtime
- Runtime check needed: deleteAnnotation removes the annotation from storage — Success guarantee will be checked at runtime
- Runtime check needed: loadAnnotations returns all annotations for a unit — Success guarantee will be checked at runtime
- Runtime check needed: getUnresolvedAnnotations returns only annotations where resolved is false — Success guarantee will be checked at runtime
- Runtime check needed: Returns AnnotationError with reason and message — Failure guarantee will be checked at runtime
- Runtime check needed: Annotation files are scoped per unit (one JSON file per unitId) — Invariant will be checked at runtime
- Runtime check needed: Annotation IDs are unique across the project — Invariant will be checked at runtime
- Runtime check needed: Empty annotation files are deleted (not left as empty arrays) — Invariant will be checked at runtime
- Runtime check needed: Failure mode handled: UnitNotFound — Error type 'UnitNotFound' is referenced but handler completeness deferred to runtime
- Runtime check needed: Failure mode handled: AnnotationNotFound — Error type 'AnnotationNotFound' is referenced but handler completeness deferred to runtime
- Runtime check needed: Failure mode handled: InvalidTarget — Error type 'InvalidTarget' is referenced but handler completeness deferred to runtime
