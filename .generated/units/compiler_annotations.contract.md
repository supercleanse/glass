<!-- Auto-generated by Glass Compiler â€” do not edit directly -->


# Contract: compiler.annotations

## Preconditions (Requires)

- annotationsDir is a valid directory path
- unitId is a non-empty string
- target follows valid format: line:<n> or dotted path (intent.*, contract.*, implementation.*)

## Guarantees on Success

- addAnnotation persists annotation to .annotations/<unitId>.annotations.json
- Each annotation has a unique generated ID
- resolveAnnotation sets resolved: true and persists
- deleteAnnotation removes the annotation from storage
- loadAnnotations returns all annotations for a unit
- getUnresolvedAnnotations returns only annotations where resolved is false

## Guarantees on Failure

- Returns AnnotationError with reason and message

## Invariants

- Annotation files are scoped per unit (one JSON file per unitId)
- Annotation IDs are unique across the project
- Empty annotation files are deleted (not left as empty arrays)

## Failure Modes

- **UnitNotFound**: Error(AnnotationError, reason: UnitNotFound)
- **AnnotationNotFound**: Error(AnnotationError, reason: AnnotationNotFound)
- **InvalidTarget**: Error(AnnotationError, reason: InvalidTarget)
- **WriteError**: Error(AnnotationError, reason: WriteError)
