<!-- Auto-generated by Glass Compiler â€” do not edit directly -->


# Contract: compiler.ts_program_factory

## Preconditions (Requires)

- "TypeScript compiler API is available (typescript package installed)"
- "projectRoot points to a directory with tsconfig.json"
- "GlassFile has a non-empty implementation section"

## Guarantees on Success

- "createProgramFromGlassFile returns a ts.Program with type checker"
- "createBatchProgram returns all source files in a single shared program"
- "getVirtualPath returns a deterministic path for a unit ID"
- "Relative imports in implementations are resolved against actual source"

## Guarantees on Failure

- "Returns null if implementation has syntax errors"
- "Returns null if program creation fails"

## Invariants

- "Compiler options are cached across calls"
- "Shebang lines are stripped before parsing"
- "Virtual files never collide with real file paths"

## Failure Modes

- **SyntaxError**: "Returns null when implementation has TypeScript syntax errors"

## Advisories

- [OPEN] "Batch program creation shares a single ts.Program for performance"
